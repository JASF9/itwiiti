{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Switch,Route,Link}from\"react-router-dom\";import UserService from\"../services/user.service\";import PostsService from\"../services/posts.services\";import Home from\"../components/home.component\";import Register from\"../components/register.component\";import NewPost from\"../components/newpost.component\";import UpdateUser from\"../components/updateuser\";import SetPhoto from\"../components/setphoto.component\";import MyPost from\"../components/mypost.component\";var MyPage=/*#__PURE__*/function(_Component){_inherits(MyPage,_Component);var _super=_createSuper(MyPage);function MyPage(props){var _this;_classCallCheck(this,MyPage);_this=_super.call(this,props);_this.onClickDelete=_this.onClickDelete.bind(_assertThisInitialized(_this));_this.onClickPrivate=_this.onClickPrivate.bind(_assertThisInitialized(_this));_this.state={nick:\"\",photo:\"\",private:false,posts:[],//config\nloaded:false};return _this;}_createClass(MyPage,[{key:\"onClickDelete\",value:function onClickDelete(e){var _this2=this;UserService.delete(this.state.nick).then(function(){_this2.props.history.push('/register');}).catch(function(err){console.log(err);});}},{key:\"onClickPrivate\",value:function onClickPrivate(e){var _this3=this;if(this.state.private===true){var data={private:false};}else{data={private:true};}UserService.update(this.state.nick,data).then(function(){_this3.props.history.push('/user');}).catch(function(err){console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;UserService.get().then(function(response){_this4.setState({nick:response.data.nick,private:response.data.private,photo:response.data.photo,loaded:true});}).catch(function(err){console.log(err);});PostsService.get(this.state.nick).then(function(response){_this4.setState({posts:response.data});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand navbar-dark bg-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav mr-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"nav-link\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",className:\"nav-link\",children:\"My Page\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/post\",className:\"nav-link\",children:\"New Post\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user/update\",className:\"nav-link\",children:\"Update Info\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/photo\",className:\"nav-link\",children:\"Set Photo\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"p\",{onClick:this.onClickDelete,children:\"Delete User\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"p\",{onClick:this.onClickPrivate,children:\"Change private setting\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",component:Home}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/user\",component:MyPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/post\",component:NewPost}),/*#__PURE__*/_jsx(Route,{path:\"/post:id\",component:MyPost}),/*#__PURE__*/_jsx(Route,{path:\"/user/update\",component:UpdateUser}),/*#__PURE__*/_jsx(Route,{path:\"/photo\",component:SetPhoto})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"My Posts\"}),this.state.posts.map(function(post){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/post\"+post.id,children:/*#__PURE__*/_jsx(\"img\",{src:post.media,alt:\"\"})})});})]})]});}}]);return MyPage;}(Component);export{MyPage as default};","map":{"version":3,"sources":["C:/Users/Jose Sanchez/Desktop/2P/front/src/components/mypage.component.js"],"names":["React","Component","Switch","Route","Link","UserService","PostsService","Home","Register","NewPost","UpdateUser","SetPhoto","MyPost","MyPage","props","onClickDelete","bind","onClickPrivate","state","nick","photo","private","posts","loaded","e","delete","then","history","push","catch","err","console","log","data","update","get","response","setState","map","post","id","media"],"mappings":"y2BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,MAAR,CAAgBC,KAAhB,CAAuBC,IAAvB,KAAmC,kBAAnC,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,iCAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,C,GAEqBC,CAAAA,M,gGACjB,gBAAYC,KAAZ,CAAkB,wCACd,uBAAMA,KAAN,EACA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CACA,MAAKC,cAAL,CAAsB,MAAKA,cAAL,CAAoBD,IAApB,+BAAtB,CACA,MAAKE,KAAL,CAAa,CACTC,IAAI,CAAC,EADI,CAETC,KAAK,CAAC,EAFG,CAGTC,OAAO,CAAE,KAHA,CAITC,KAAK,CAAC,EAJG,CAMT;AACAC,MAAM,CAAC,KAPE,CAAb,CAJc,aAajB,C,uEAEaC,C,CAAE,iBACZnB,WAAW,CAACoB,MAAZ,CAAmB,KAAKP,KAAL,CAAWC,IAA9B,EACCO,IADD,CACO,UAAM,CACT,MAAI,CAACZ,KAAL,CAAWa,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB,EACH,CAHD,EAICC,KAJD,CAIO,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAND,EAOH,C,sDAEcN,C,CAAE,iBACb,GAAG,KAAKN,KAAL,CAAWG,OAAX,GAAqB,IAAxB,CAA6B,CACzB,GAAIY,CAAAA,IAAI,CAAE,CACNZ,OAAO,CAAE,KADH,CAAV,CAGH,CAJD,IAKI,CACAY,IAAI,CAAE,CACFZ,OAAO,CAAC,IADN,CAAN,CAGH,CAGDhB,WAAW,CAAC6B,MAAZ,CAAmB,KAAKhB,KAAL,CAAWC,IAA9B,CAAmCc,IAAnC,EACCP,IADD,CACO,UAAM,CACT,MAAI,CAACZ,KAAL,CAAWa,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EACH,CAHD,EAICC,KAJD,CAIO,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAND,EAOH,C,6DAEkB,iBACfzB,WAAW,CAAC8B,GAAZ,GACCT,IADD,CACM,SAAAU,QAAQ,CAAI,CACd,MAAI,CAACC,QAAL,CAAc,CACVlB,IAAI,CAAEiB,QAAQ,CAACH,IAAT,CAAcd,IADV,CAEVE,OAAO,CAAEe,QAAQ,CAACH,IAAT,CAAcZ,OAFb,CAGVD,KAAK,CAAEgB,QAAQ,CAACH,IAAT,CAAcb,KAHX,CAKVG,MAAM,CAAC,IALG,CAAd,EAOH,CATD,EAUCM,KAVD,CAUO,SAAAC,GAAG,CAAG,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAZD,EAaAxB,YAAY,CAAC6B,GAAb,CAAiB,KAAKjB,KAAL,CAAWC,IAA5B,EACCO,IADD,CACM,SAAAU,QAAQ,CAAI,CACd,MAAI,CAACC,QAAL,CAAc,CACVf,KAAK,CAAEc,QAAQ,CAACH,IADN,CAAd,EAGH,CALD,EAMH,C,uCAGO,CACJ,mBACI,oCACI,YAAK,SAAS,CAAC,0CAAf,uBACA,aAAK,SAAS,CAAC,oBAAf,wBACI,WAAI,SAAS,CAAC,UAAd,uBACA,KAAC,IAAD,EAAM,EAAE,CAAE,OAAV,CAAmB,SAAS,CAAC,UAA7B,kBADA,EADJ,cAMI,WAAI,SAAS,CAAC,UAAd,uBACA,KAAC,IAAD,EAAM,EAAE,CAAE,OAAV,CAAmB,SAAS,CAAC,UAA7B,qBADA,EANJ,cAWI,WAAI,SAAS,CAAC,UAAd,uBACA,KAAC,IAAD,EAAM,EAAE,CAAE,OAAV,CAAmB,SAAS,CAAC,UAA7B,sBADA,EAXJ,cAgBI,WAAI,SAAS,CAAC,UAAd,uBACA,KAAC,IAAD,EAAM,EAAE,CAAE,cAAV,CAA0B,SAAS,CAAC,UAApC,yBADA,EAhBJ,cAqBI,WAAI,SAAS,CAAC,UAAd,uBACA,KAAC,IAAD,EAAM,EAAE,CAAE,QAAV,CAAoB,SAAS,CAAC,UAA9B,uBADA,EArBJ,cA0BI,WAAI,SAAS,CAAC,UAAd,uBACA,UAAG,OAAO,CAAE,KAAKlB,aAAjB,yBADA,EA1BJ,cA6BI,WAAI,SAAS,CAAC,UAAd,uBACA,UAAG,OAAO,CAAE,KAAKE,cAAjB,oCADA,EA7BJ,GADA,EADJ,cAqCI,YAAK,SAAS,CAAC,gBAAf,uBACA,MAAC,MAAD,yBACI,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEV,IAA/B,EADJ,cAEI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEC,QAAzC,EAFJ,cAGI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,OAAlB,CAA0B,SAAS,CAAEK,MAArC,EAHJ,cAII,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,OAAlB,CAA0B,SAAS,CAAEJ,OAArC,EAJJ,cAKI,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAEG,MAAlC,EALJ,cAMI,KAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,CAA2B,SAAS,CAAEF,UAAtC,EANJ,cAOI,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEC,QAAhC,EAPJ,GADA,EArCJ,cAiDI,oCACI,gCADJ,CAEK,KAAKO,KAAL,CAAWI,KAAX,CAAiBgB,GAAjB,CAAsB,SAAAC,IAAI,CAAI,CAC3B,mBACI,kCACI,KAAC,IAAD,EAAM,EAAE,CAAE,QAAQA,IAAI,CAACC,EAAvB,uBACA,YAAK,GAAG,CAAED,IAAI,CAACE,KAAf,CAAsB,GAAG,CAAC,EAA1B,EADA,EADJ,EADJ,CAOH,CARA,CAFL,GAjDJ,GADJ,CAiEH,C,oBAzI+BxC,S,SAAfY,M","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Switch, Route, Link } from \"react-router-dom\";\r\nimport UserService from \"../services/user.service\";\r\nimport PostsService from \"../services/posts.services\";\r\n\r\nimport Home from \"../components/home.component\"\r\nimport Register from \"../components/register.component\"\r\nimport NewPost from \"../components/newpost.component\"\r\nimport UpdateUser from \"../components/updateuser\"\r\nimport SetPhoto from \"../components/setphoto.component\"\r\nimport MyPost from \"../components/mypost.component\"\r\n\r\nexport default class MyPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.onClickDelete = this.onClickDelete.bind(this)\r\n        this.onClickPrivate = this.onClickPrivate.bind(this)\r\n        this.state = {\r\n            nick:\"\",\r\n            photo:\"\",\r\n            private: false,\r\n            posts:[],\r\n            \r\n            //config\r\n            loaded:false\r\n        };\r\n    }\r\n    \r\n    onClickDelete(e){\r\n        UserService.delete(this.state.nick)\r\n        .then( () => {\r\n            this.props.history.push('/register')\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    onClickPrivate(e){\r\n        if(this.state.private===true){\r\n            var data ={\r\n                private: false\r\n            };\r\n        }\r\n        else{\r\n            data ={\r\n                private:true\r\n            };\r\n        }\r\n        \r\n\r\n        UserService.update(this.state.nick,data)\r\n        .then( () => {\r\n            this.props.history.push('/user')\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        UserService.get()\r\n        .then(response => {\r\n            this.setState({\r\n                nick: response.data.nick,\r\n                private: response.data.private,\r\n                photo: response.data.photo,\r\n\r\n                loaded:true\r\n            })\r\n        })\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n        PostsService.get(this.state.nick)\r\n        .then(response => {\r\n            this.setState({\r\n                posts: response.data\r\n            })\r\n        })\r\n    }\r\n   \r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n                <div className=\"navbar-nav mr-auto\">\r\n                    <li className=\"nav-item\">\r\n                    <Link to={\"/home\"} className=\"nav-link\">\r\n                        Home\r\n                    </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <Link to={\"/user\"} className=\"nav-link\">\r\n                        My Page\r\n                    </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <Link to={\"/post\"} className=\"nav-link\">\r\n                        New Post\r\n                    </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <Link to={\"/user/update\"} className=\"nav-link\">\r\n                        Update Info\r\n                    </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <Link to={\"/photo\"} className=\"nav-link\">\r\n                        Set Photo\r\n                    </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <p onClick={this.onClickDelete}>Delete User</p>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                    <p onClick={this.onClickPrivate}>Change private setting</p>\r\n                    </li>\r\n                </div>\r\n                </nav>\r\n\r\n                <div className=\"container mt-3\">\r\n                <Switch>\r\n                    <Route path=\"/home\" component={Home} />\r\n                    <Route exact path=\"/register\" component={Register} />\r\n                    <Route exact path=\"/user\" component={MyPage} />\r\n                    <Route exact path=\"/post\" component={NewPost} />\r\n                    <Route path=\"/post:id\" component={MyPost} />\r\n                    <Route path=\"/user/update\" component={UpdateUser} />\r\n                    <Route path=\"/photo\" component={SetPhoto} />\r\n                </Switch>\r\n                </div>\r\n\r\n                <div>\r\n                    <h4>My Posts</h4>\r\n                    {this.state.posts.map (post => {\r\n                        return(\r\n                            <div>\r\n                                <Link to={\"/post\"+post.id}>\r\n                                <img src={post.media} alt=\"\"/>\r\n                                </Link>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n                \r\n            </div>\r\n        )     \r\n    }\r\n    \r\n} "]},"metadata":{},"sourceType":"module"}