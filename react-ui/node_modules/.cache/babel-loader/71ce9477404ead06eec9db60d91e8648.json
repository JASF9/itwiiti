{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jose Sanchez/Desktop/2P/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Router,Route,Link}from\"react-router-dom\";import UserService from\"../services/user.service\";import PostsService from\"../services/posts.services\";import MyPost from\"../components/mypost.component\";var NewPost=/*#__PURE__*/function(_Component){_inherits(NewPost,_Component);var _super=_createSuper(NewPost);function NewPost(props){var _this;_classCallCheck(this,NewPost);_this=_super.call(this,props);_this.onChangeDescription=_this.onChangeDescription.bind(_assertThisInitialized(_this));_this.onChangeFile=_this.onChangeFile.bind(_assertThisInitialized(_this));_this.savePost=_this.savePost.bind(_assertThisInitialized(_this));_this.state={description:\"\",creator:\"\",file:null,id:0,submitted:false};return _this;}_createClass(NewPost,[{key:\"onChangeDescription\",value:function onChangeDescription(e){this.state({description:e.target.value});}},{key:\"onChangeFile\",value:function onChangeFile(e){this.state({file:e.target.files[0]});}},{key:\"savePost\",value:function savePost(){var _this2=this;var data={description:this.state.description,creator:this.state.creator,file:this.state.file};PostsService.create(data).then(function(response){_this2.setState({description:response.data.description,creator:response.data.creator,id:response.data.id,submitted:true});}).catch(function(err){console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;UserService.get().then(function(response){_this3.setState({creator:response.data.nick});}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"submit-form\",children:this.state.submitted?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"You have made a post!\"}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/post\"+this.state.id,children:/*#__PURE__*/_jsx(\"button\",{children:\"Go check it\"})}),/*#__PURE__*/_jsx(Route,{path:\"/post:id\",component:MyPost})]})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description(max 240 chars)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"description\",required:true,value:this.state.description,onChange:this.onChangeDescription,name:\"description\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Upload a image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",id:\"file\",required:true,value:this.state.file,onChange:this.onChangeFile,name:\"file\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.savePost,className:\"btn btn-success\",children:\"Make Post\"})]})});}}]);return NewPost;}(Component);export{NewPost as default};","map":{"version":3,"sources":["C:/Users/Jose Sanchez/Desktop/2P/front/src/components/newpost.component.js"],"names":["React","Component","Router","Route","Link","UserService","PostsService","MyPost","NewPost","props","onChangeDescription","bind","onChangeFile","savePost","state","description","creator","file","id","submitted","e","target","value","files","data","create","then","response","setState","catch","err","console","log","get","nick"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport { Router, Route, Link } from \"react-router-dom\";\r\nimport UserService from \"../services/user.service\";\r\nimport PostsService from \"../services/posts.services\"\r\n\r\nimport MyPost from \"../components/mypost.component\"\r\n\r\nexport default class NewPost extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onChangeDescription = this.onChangeDescription.bind(this)\r\n        this.onChangeFile = this.onChangeFile.bind(this)\r\n        this.savePost = this.savePost.bind(this)\r\n        \r\n        this.state = {\r\n            description: \"\",\r\n            creator: \"\",\r\n            file:null,\r\n            id:0,\r\n            submitted: false\r\n        };\r\n    }\r\n\r\n    onChangeDescription(e){\r\n        this.state({\r\n            description: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeFile(e){\r\n        this.state({\r\n            file: e.target.files[0]\r\n        });\r\n    }\r\n\r\n    savePost(){\r\n        var data ={\r\n            description: this.state.description,\r\n            creator: this.state.creator,\r\n            file: this.state.file\r\n        };\r\n\r\n        PostsService.create(data)\r\n        .then(response => {\r\n            this.setState({\r\n                description: response.data.description,\r\n                creator: response.data.creator,\r\n                id: response.data.id,\r\n\r\n                submitted: true\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        UserService.get()\r\n        .then(response => {\r\n            this.setState({\r\n                creator: response.data.nick,\r\n            })\r\n        })\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"submit-form\">\r\n              {this.state.submitted ? (\r\n                <div>\r\n                  <h4>You have made a post!</h4>\r\n                  <Router>\r\n                    <div>\r\n                      <Link to={\"/post\"+this.state.id}>\r\n                        <button>Go check it</button>\r\n                      </Link>\r\n                      <Route path=\"/post:id\" component={MyPost} />\r\n                    </div>\r\n                  </Router>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"description\">Description(max 240 chars)</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      id=\"description\"\r\n                      required\r\n                      value={this.state.description}\r\n                      onChange={this.onChangeDescription}\r\n                      name=\"description\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"file\">Upload a image</label>\r\n                    <input\r\n                      type=\"file\"\r\n                      className=\"form-control\"\r\n                      id=\"file\"\r\n                      required\r\n                      value={this.state.file}\r\n                      onChange={this.onChangeFile}\r\n                      name=\"file\"\r\n                    />\r\n                  </div>\r\n      \r\n                  <button onClick={this.savePost} className=\"btn btn-success\">\r\n                    Make Post\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        }\r\n    }"]},"metadata":{},"sourceType":"module"}